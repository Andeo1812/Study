#  Углубленное программирование на языке С/С++

## Индивидуальное задание №2
### Вариант 38
Вы разрабатываете специализированную БД сотрудников для корпорации, в которой работает около 10к человек. 
По ряду причин все данные необходимо хранить в оперативной памяти. Предложите такую эффективную упаковку 
данных о сотруднике (его имени, фамилии, поле, возрасте, заработной плате, должности и стаже работы), 
при которой эти данные занимали бы наименьший объем. Используя её, реализуйте однопоточную и многопоточную 
программу построения отчётов о средней заработной плате для каждой должности в зависимости от стажа работы.
### Критерии
Корректно реализован последовательный алгоритм, ревьюер одобрил весь код, при этом есть хотя бы одна настройка 
от CI и хотя бы один тест, которые автоматически запускаются для всех новых изменений и проходят на итоговой версии –  3

Последовательная реализация полностью покрыта юнит-тестами –  1

Для последовательной реализации настроен и проходит CI: автоматическая сборка, статический анализ,
линтеры, valgrind, code coverage, запуск тестов –  1

Корректно реализован параллельный алгоритм, ревьюер одобрил весь код, при этом есть хотя бы одна
настройка от CI и хотя бы один тест, которые автоматически запускаются для всех новых изменений и 
проходят на итоговой версии –  5

Эффективная работа с памятью (выравнивание структур/работа с кеш-памятью/эффективные структуры
данных для хранения и обмена данными между потоками/процессами) –  2

Оформление кода в виде статической и динамической библиотек с одним интерфейсом –  2

Рабочие на CI стресс-тесты для сравнения последовательной и параллельной реализаций –  1

Первым аргументом программе подается путь к файлу письма (.blk).

## Формат ввода:

`name[32] surname[64] gender[8] age[4] salaty[16] position[64] experience[4]`

Что соответствует содержимому сета бланков [in.txt](project/gtest/data/ok/in.txt):
```
1 office Alex
2 office Alex
53 office Alex
43 srorage_56 Zina
44 srorage_56 Zina
40 cooler Zina
41 cooler Zina
```

## Формат вывода:

`storage responsible`

`number 1 2 3`

Что соответствует результату [out.txt](project/gtest/data/ok/out.txt):
```
office Alex
1 2
office Alex
53
srorage_56 Zina
43 44
cooler Zina
40 41
```

## Устройство структуры:

Это односвязный список из двухсвязных списков.

Первый уровень - структура-звено. Содержит номер бланка, также указатель на следующее звено и предыдушее.

Второй уровень - структура-списка звеньев. Хранит в себе указатель на первый узел номера, на последний, также содержит 
название хранилища и имя отвественного.

Третий уровень - структура-звено. Содержит указатель на структура второго уровня и указатель на следующее
звено.

## Работа программы:

На вход принимает первым аргументом тип работы и пути к файлам. 

### Примеры запуска:
```
./build/main 1
```
- для чтения и записи из стандартных потоков.

```
./build/main 2 project/gtest/data/ok/in.txt
```
- для чтения из файла и записи в стандартный поток вывода.

```
./build/main 3 project/gtest/data/ok/in.txt project/gtest/data/ok/tmp.txt
```
- для чтения стандартного потока чтения и записи в стандартный поток вывода.

```
./build/main 4 project/gtest/data/ok/in.txt project/gtest/data/ok/tmp.txt
```
- для чтения из файла и записи из файла, если файла для записи нет то создаст.

## Проверки:
1. Стические анализаторы cppcheck, clang-tidy, cpplint.
2. Сборка на cmake.
3. Тестирование на gtest.
4. Провекрка покрытия gtest. Если менее чем 70% (опционально в make) выдаст ошибку.
5. Запуск тестов на valgring.

При наличии замечаний или неудаче выдаст ошибку.